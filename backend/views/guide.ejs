<div class="container mt-4">
  <h2 class="mb-3">Daftar Guide</h2>

  <!-- Tampilkan error validasi -->
  <% if (errors && errors.length > 0) { %>
  <div class="alert alert-danger">
    <ul>
      <% errors.forEach(err => { %>
        <li><%= err.msg || err %></li>
      <% }) %>
    </ul>
  </div>
  <% } %>

    <!-- ğŸ”¹ Tombol Download PDF -->
  <a href="/guides/pdf" class="btn btn-danger mb-3">Download PDF</a>

  <!-- Form Tambah Guide -->
  <form action="/guides" method="POST" class="mb-4">
    <div class="row g-2">
      <div class="col-md-5">
        <input type="text" class="form-control" name="nama" placeholder="Nama Guide" required>
      </div>
      <div class="col-md-5">
        <input type="url" class="form-control" name="link" placeholder="Link Guide" required>
      </div>
      <div class="col-md-2 d-grid">
        <button type="submit" class="btn btn-primary">Tambah</button>
      </div>
    </div>
  </form>

  <!-- List Guide -->
  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>#</th>
        <th>Nama Guide</th>
        <th>Link</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody>
      <% if (guides && guides.length > 0) { %>
        <% guides.forEach((g, index) => { %>
          <tr>
            <td><%= index + 1 %></td>
            <td><%= g.Nama %></td>
            <td>
              <a href="<%= g.Link %>" target="_blank" class="btn btn-sm btn-outline-info">
                Buka Link
              </a>
            </td>
            <td>
              <!-- Tombol Hapus -->
              <form action="/guides/<%= g.ID %>?_method=DELETE" method="POST" style="display:inline;">
                <button type="submit" class="btn btn-sm btn-danger"
                  onclick="return confirm('Yakin ingin menghapus guide ini?')">
                  Hapus
                </button>
              </form>

              <!-- Tombol Edit -->
              <a href="/guides/<%= g.ID %>/edit" class="btn btn-sm btn-warning">Edit</a>
            </td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr>
          <td colspan="4" class="text-center">Belum ada guide.</td>
        </tr>
      <% } %>
    </tbody>
  </table>
</div>
